"use strict";(function($){$.fn.slideform=function(userOptions,args){var $form=$(this);var $slides=$form.find('.slideform-slide');var $wrapper=null;var $track=null;var $current=0;var $max=0;var $options={nextButtonText:'OK',prevButtonText:'Anterior',submitButtonText:'Enviar',validate:null,submit:null}
if(typeof userOptions!=='undefined'){for(var attr in userOptions){$options[attr]=userOptions[attr];}}
init();$form.on('click','.slideform-btn',function(event){event.preventDefault();var btn=$(this);if(btn.hasClass('slideform-btn-next')){var valid=true;btn.closest('.slideform-group').find('input').each(function(){if($.validator&&!$(this).valid()){valid=false;}});if(valid)$form.goForward();}
if(btn.hasClass('slideform-btn-prev')){$form.goBack();}
if(btn.hasClass('slideform-btn-submit')){$form.submit();};});$form.find('input[type=radio] + span, input[type=checkbox] + span').on('click',function(){var input=$(this).prev();if((input.attr('type')!='radio'||!input.is(':checked'))&&!input.is(':disabled')){input.prop('checked',!input.is(':checked')).change();}});$('input, textarea, select').on('blur change',function(event){triggerConditions();});$(window).resize(function(){setSlidesHeight();});function init(){$form.addClass('slideform-form').addClass('slideform-initialized');$track=$('<div />',{class:'slideform-track'}).insertBefore($form.find('.slideform-slide').eq(0));$wrapper=$('<div />',{class:'slideform-wrapper'}).appendTo($track).append($form.find('.slideform-slide'));setSlidesHeight();enableValidation();updateButtonsStatus($current);$form.find('.slideform-slide').each(function(k,v){if(k==0)$(this).addClass('active');if(k<$slides.length-2){$(this).find('.slideform-group').append('<button class="slideform-btn slideform-btn-next">'+$options.nextButtonText+'</button>');}else if(k<$slides.length-1){$(this).find('.slideform-group').append('<button type="submit" class="slideform-btn slideform-btn-submit"><i class="icon-check"></i>&nbsp;&nbsp;'+$options.submitButtonText+'</button>')}});$('[data-condition]').find('input, select, textarea, button').prop('disabled',true);}
$form.on('submit',function(event){if($options.submit){event.preventDefault();$options.submit(event,$form);}});function enableValidation(){if(!$options.validate||!$.validator)return;var data={errorPlacement:function(error,element){if(element.attr("type")=="radio"||element.attr('type')=='checkbox'){error.appendTo(element.closest('div'));}else{error.insertAfter(element);}}}
if(typeof $options.validate.rules!=='undefined'){data.rules=$options.validate.rules;}
if(typeof $options.validate.messages!=='undefined'){data.messages=$options.validate.messages;}
$form.validate(data);}
$form.goTo=function(slide){var translation=slide*(100/$slides.length);var percentage=0;if(slide-1<=0){percentage=0;}else if(slide==($slides.length-1)){percentage=100;}else{percentage=(slide-1)*(100/($slides.length-2));}
$wrapper.css('transform','translateY('+translation*-1+'%)');$('.slideform-progress-bar span').css('width',percentage+'%');$slides.filter('.active').animate({scrollTop:0},'fast');$slides.eq(slide).addClass('active').siblings().removeClass('active');$max=(slide>$max)?slide:$max;updateButtonsStatus(slide);}
$form.goForward=function(){if(!validateSlideInputs($current))return;if($current==($slides.length-1))return;$form.goTo(++$current);}
$form.goBack=function(){if($current==0)return;$current--;$form.goTo($current);}
function setSlidesHeight(){$form.find('.slideform-slide').css('height',$track.outerHeight());}
function updateButtonsStatus(slideNumber){$form.find('.slideform-btn-next').prop('disabled',(slideNumber==$slides.length-1));$form.find('.slideform-btn-prev').prop('disabled',(slideNumber==0));$form.find('footer .slideform-btn-next').prop('disabled',(slideNumber>=$max));}
function validateSlideInputs(slideNumber){if(!$.validator)return true;var valid=true;$slides.eq(slideNumber).find('input, textarea, select').each(function(){if(!$(this).valid())valid=false;});return valid;}
function triggerConditions(){var input={};var array=$form.serializeArray().map(function(i){input[i.name]=i.value});$form.find('[data-condition]').each(function(){var valid=eval($(this).data('condition'));$(this).find('input, textarea, select').prop('disabled',!valid);if(valid){$(this).slideDown();}else{$(this).slideUp();}});}
function callFunction(name,args){var fn='$form.'+name+'()';console.log(fn);return eval(fn);}
$form.on('goForward',function(){$form.goForward();});$form.on('goBack',function(){$form.goBack();});$form.on('goTo',function(event,slide){$form.goTo(slide);});}}(jQuery));